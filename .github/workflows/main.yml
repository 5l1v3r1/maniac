name: CMake Build

on: [push]

jobs:
  build-ubuntu:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: Configure
      run: ./configure.sh && mkdir build && cd build && ..
    - name: Build
      run: cmake --build build && mkdir artifact && mv build/maniac artifact
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: build-ubuntu-latest
        path: artifact

  build-windows:

    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v1
    - name: Configure
      run: mkdir build && cd build && cmake ..
      shell: bash
    - name: Build
      run: cmake --build build && mkdir artifact && mv build/maniac artifact
      shell: bash
    - name: Upload artifact
      uses: actions/upload-artifact@v1.0.0
      with:
        name: build-windoes-latest
        path: artifact
